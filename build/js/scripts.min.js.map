{"version":3,"sources":["source/js/modal.js","source/js/form.js"],"names":["modalCloseBtn","popup","openPopup","evt","preventDefault","video","dataPopup","this","dataset","modalOpen","document","querySelector","src","addEventListener","classList","remove","console","dir","split","closePopup","add","querySelectorAll","forEach","btnItem","window","keyCode","contains","popupThanks","popupSend","forms","isStorageSupport","storage","localStorage","getItem","err","item","form","inputName","inputPhone","value","setItem","form_data","$","serialize","ajax","type","url","data","crossDomain","success","formValidation"],"mappings":"iGACA,IAAIA,EACAC,EAKJ,SAASC,EAAUC,GACjBA,EAAIC,iBACJ,IACIC,EADAC,EAAYC,KAAKC,QAAQC,UAE7BR,EAAQS,SAASC,cAAc,UAAUL,GAEzB,SAAbA,IACDD,EAAQJ,EAAMU,cAAc,qBAC5BN,EAAMO,KAAO,eAOjB,SAAoBX,EAAOI,GACzBL,EAAgBC,EAAMU,cAAc,sBAEpCX,EAAca,iBAAiB,SAAS,SAASV,GAC/CA,EAAIC,iBACJH,EAAMa,UAAUC,OAAO,iBAEpBV,IACDW,QAAQC,IAAIZ,EAAMO,KAClBP,EAAMO,IAAKP,EAAMO,IAAIM,MAAM,KAAK,OAdpCC,CAAWlB,EAAOI,GAClBJ,EAAMa,UAAUM,IAAI,iBAlBDV,SAASW,iBAAiB,qBAKlCC,QAAQC,GAAWA,EAAQV,iBAAiB,QAASX,IAgClEsB,OAAOX,iBAAiB,WAAW,SAASV,GACtB,KAAhBA,EAAIsB,SACFxB,EAAMa,UAAUY,SAAS,mBAC3BvB,EAAIC,iBACJH,EAAMa,UAAUC,OAAO,qBCzC7B,MAGMY,EAAcjB,SAASC,cAAc,iBACrCiB,EAAYlB,SAASC,cAAc,eACnCkB,EAAQnB,SAASW,iBAAiB,aACxC,IAEErB,EAFE8B,GAAmB,EACrBC,EAAU,GAGZ,IACEA,EAAUC,aAAaC,QAAQ,YAC/B,MAAOC,GACPJ,GAAmB,EAGrBD,EAAMP,QAAQa,GAEd,SAAwBC,GACtB,MAAMC,EAAYD,EAAKzB,cAAc,2BAC/B2B,EAAaF,EAAKzB,cAAc,uBAStCyB,EAAKvB,iBAAiB,UAAU,SAASV,GAEvC,GADAA,EAAIC,iBACCiC,EAAUE,OAAUD,EAAWC,MAY7B,CACDT,GACFE,aAAaQ,QAAQ,WAAYH,EAAUE,OAE7CF,EAAUvB,UAAUC,OAAO,sBAC3BuB,EAAWxB,UAAUC,OAAO,sBAGxBa,GACFA,EAAUd,UAAUC,OAAO,iBAG7B,IAAI0B,EAAYC,EAAEnC,MAAMoC,YAAY,YAEpCD,EAAEE,KAAK,CACHC,KAAM,OACNC,IA3DY,eA4DZC,KAAMN,EACNO,aAAa,EACbC,QAAS,WAGDtB,IACFA,EAAYb,UAAUM,IAAI,iBAS1C,SAAoBnB,GAClBD,EAAgBC,EAAMU,cAAc,sBAEpCX,EAAca,iBAAiB,SAAS,SAASV,GAC/CA,EAAIC,iBACJH,EAAMa,UAAUC,OAAO,oBAbXI,CAAWQ,YAnCrBxB,EAAIC,iBACAiC,EAAUE,MAGZF,EAAUvB,UAAUC,OAAO,sBAF3BsB,EAAUvB,UAAUM,IAAI,sBAItBkB,EAAWC,MAGbD,EAAWxB,UAAUC,OAAO,sBAF5BuB,EAAWxB,UAAUM,IAAI,yBAvBX8B,CAAef,IAqErCX,OAAOX,iBAAiB,WAAW,SAASV,GACtB,KAAhBA,EAAIsB,SACFE,EAAYb,UAAUY,SAAS,mBACjCvB,EAAIC,iBACJuB,EAAYb,UAAUC,OAAO","file":"scripts.min.js","sourcesContent":["const modalOpenBtn = document.querySelectorAll(\"[data-modal-open]\");\r\nlet modalCloseBtn,\r\n    popup;\r\n\r\n\r\nmodalOpenBtn.forEach(btnItem => btnItem.addEventListener(`click`, openPopup));\r\n\r\nfunction openPopup(evt) {\r\n  evt.preventDefault();\r\n  let dataPopup = this.dataset.modalOpen,\r\n      video;\r\n  popup = document.querySelector(`#modal-${dataPopup}`); \r\n\r\n  if(dataPopup == 'video') {\r\n    video = popup.querySelector(\"[data-video-play]\");\r\n    video.src += \"&autoplay=1\"\r\n  }\r\n  closePopup(popup, video); \r\n  popup.classList.add(\"modal--active\");\r\n  \r\n}\r\n\r\nfunction closePopup(popup, video) {\r\n  modalCloseBtn = popup.querySelector(\"[data-modal-close]\");\r\n\r\n  modalCloseBtn.addEventListener(\"click\", function(evt) {\r\n    evt.preventDefault();\r\n    popup.classList.remove(\"modal--active\");\r\n\r\n    if(video) {      \r\n      console.dir(video.src)\r\n      video.src= video.src.split('&')[0];\r\n    }\r\n  });\r\n  \r\n}\r\n\r\nwindow.addEventListener(\"keydown\", function(evt) {\r\n  if (evt.keyCode === 27) {\r\n    if (popup.classList.contains(\"modal--active\")) {\r\n      evt.preventDefault();\r\n      popup.classList.remove(\"modal--active\");\r\n    }\r\n  }\r\n});\r\n\r\n\r\n\r\n","const phpServerSend = 'php/send.php';\r\n\r\n\r\nconst popupThanks = document.querySelector(\"#modal-thanks\");  \r\nconst popupSend = document.querySelector(\"#modal-send\");  \r\nconst forms = document.querySelectorAll(\"[send-to]\");\r\nlet isStorageSupport = true,\r\n  storage = \"\",\r\n  modalCloseBtn;\r\n\r\ntry {\r\n  storage = localStorage.getItem(\"sendName\");\r\n} catch (err) {\r\n  isStorageSupport = false;\r\n}\r\n\r\nforms.forEach(item => formValidation(item));\r\n\r\nfunction formValidation(form) {\r\n  const inputName = form.querySelector(\"input[name='firstname']\");\r\n  const inputPhone = form.querySelector(\"input[name='phone']\");\r\n  \r\n  // if (storage) {\r\n  //   inputName.value = storage;\r\n  //   inputPhone.focus();\r\n  // } else {\r\n  //   inputName.focus();\r\n  // }\r\n\r\n  form.addEventListener(\"submit\", function(evt) {\r\n    evt.preventDefault();\r\n    if (!inputName.value || !inputPhone.value) {\r\n      evt.preventDefault();\r\n      if(!inputName.value) {\r\n        inputName.classList.add(\"form__input--error\");\r\n      } else {\r\n        inputName.classList.remove(\"form__input--error\");\r\n      }\r\n      if(!inputPhone.value) {\r\n        inputPhone.classList.add(\"form__input--error\");\r\n      } else {\r\n        inputPhone.classList.remove(\"form__input--error\");\r\n      }\r\n    } else {\r\n      if (isStorageSupport) {\r\n        localStorage.setItem(\"sendName\", inputName.value);\r\n      }\r\n      inputName.classList.remove(\"form__input--error\");\r\n      inputPhone.classList.remove(\"form__input--error\");\r\n\r\n      // Close popup Send\r\n      if (popupSend) {\r\n        popupSend.classList.remove(\"modal--active\");\r\n      }\r\n\r\n      var form_data = $(this).serialize()+\"&obj=form\"; // Собираем все данные из формы\r\n\r\n      $.ajax({\r\n          type: \"POST\", // Метод отправки\r\n          url: phpServerSend, // Путь до php файла отправителя\r\n          data: form_data,\r\n          crossDomain: true,\r\n          success: function () {\r\n              // Код в этом блоке выполняется при успешной отправке сообщения\r\n              // Open popup Thanks\r\n              if (popupThanks) {\r\n                popupThanks.classList.add(\"modal--active\");\r\n                closePopup(popupThanks); \r\n              } \r\n          }\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction closePopup(popup) {\r\n  modalCloseBtn = popup.querySelector(\"[data-modal-close]\");\r\n\r\n  modalCloseBtn.addEventListener(\"click\", function(evt) {\r\n    evt.preventDefault();\r\n    popup.classList.remove(\"modal--active\");\r\n  });\r\n}\r\n\r\n\r\nwindow.addEventListener(\"keydown\", function(evt) {\r\n  if (evt.keyCode === 27) {\r\n    if (popupThanks.classList.contains(\"modal--active\")) {\r\n      evt.preventDefault();\r\n      popupThanks.classList.remove(\"modal--active\");\r\n    }\r\n  }\r\n});\r\n\r\n"]}